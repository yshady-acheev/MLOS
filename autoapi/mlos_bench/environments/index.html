

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mlos_bench.environments &mdash; MLOS 0.6.2.dev43+g795d1b03c6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=39539cd3"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="mlos_bench.environments.base_environment" href="base_environment/index.html" />
    <link rel="prev" title="mlos_bench.dict_templater" href="../dict_templater/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            MLOS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Source Tree Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../source_tree_docs/index.html">MLOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../source_tree_docs/mlos_core/index.html">mlos-core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../source_tree_docs/mlos_bench/index.html">mlos-bench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../source_tree_docs/mlos_viz/index.html">mlos-viz</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../mlos_core/index.html">mlos_core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">mlos_bench</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#classes-overview">Classes Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../config/index.html">mlos_bench.config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dict_templater/index.html">mlos_bench.dict_templater</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">mlos_bench.environments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-tunables">Environment Tunables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-services">Environment Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-propagation">Variable Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../event_loop_context/index.html">mlos_bench.event_loop_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../launcher/index.html">mlos_bench.launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../optimizers/index.html">mlos_bench.optimizers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../os_environ/index.html">mlos_bench.os_environ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../run/index.html">mlos_bench.run</a></li>
<li class="toctree-l3"><a class="reference internal" href="../schedulers/index.html">mlos_bench.schedulers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services/index.html">mlos_bench.services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../storage/index.html">mlos_bench.storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tunables/index.html">mlos_bench.tunables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../util/index.html">mlos_bench.util</a></li>
<li class="toctree-l3"><a class="reference internal" href="../version/index.html">mlos_bench.version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#attributes">Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#package-contents">Package Contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mlos_viz/index.html">mlos_viz</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">mlos_bench CLI usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../mlos_bench.run.usage.html">mlos_bench CLI usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/microsoft/MLOS">Github Source Tree</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">MLOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">mlos_bench</a></li>
      <li class="breadcrumb-item active">mlos_bench.environments</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/autoapi/mlos_bench/environments/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-mlos_bench.environments">
<span id="mlos-bench-environments"></span><h1><a class="toc-backref" href="#id1" role="doc-backlink">mlos_bench.environments</a><a class="headerlink" href="#module-mlos_bench.environments" title="Link to this heading"></a></h1>
<p>Tunable Environments for mlos_bench.</p>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#module-mlos_bench.environments" id="id1">mlos_bench.environments</a></p>
<ul>
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#environment-tunables" id="id3">Environment Tunables</a></p></li>
<li><p><a class="reference internal" href="#environment-services" id="id4">Environment Services</a></p></li>
<li><p><a class="reference internal" href="#variable-propagation" id="id5">Variable Propagation</a></p></li>
<li><p><a class="reference internal" href="#submodules" id="id6">Submodules</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Environments are classes that represent an execution setting (i.e., environment) for
running a benchmark or tuning process.</p>
<p>For instance, a <a class="reference internal" href="local/local_env/index.html#mlos_bench.environments.local.local_env.LocalEnv" title="mlos_bench.environments.local.local_env.LocalEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalEnv</span></code></a> represents a local execution environment, a
<a class="reference internal" href="remote/remote_env/index.html#mlos_bench.environments.remote.remote_env.RemoteEnv" title="mlos_bench.environments.remote.remote_env.RemoteEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteEnv</span></code></a> represents a remote execution environment, a
<a class="reference internal" href="remote/vm_env/index.html#mlos_bench.environments.remote.vm_env.VMEnv" title="mlos_bench.environments.remote.vm_env.VMEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">VMEnv</span></code></a> represents a virtual
machine, etc.</p>
<p>An Environment goes through a series of <em>phases</em> (e.g.,
<a class="reference internal" href="base_environment/index.html#mlos_bench.environments.base_environment.Environment.setup" title="mlos_bench.environments.base_environment.Environment.setup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setup()</span></code></a>, <a class="reference internal" href="base_environment/index.html#mlos_bench.environments.base_environment.Environment.run" title="mlos_bench.environments.base_environment.Environment.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a>,
<a class="reference internal" href="base_environment/index.html#mlos_bench.environments.base_environment.Environment.teardown" title="mlos_bench.environments.base_environment.Environment.teardown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">teardown()</span></code></a>, etc.) that can be used to prepare a VM, workload,
etc.; run a benchmark, script, etc.; and clean up afterwards.
Often, what these phases do (e.g., what commands to execute) will depend on the
specific Environment and the configs that Environment was loaded with.
This lets Environments be very flexible in what they can accomplish.</p>
<p>Environments can be stacked together with the <a class="reference internal" href="composite_env/index.html#mlos_bench.environments.composite_env.CompositeEnv" title="mlos_bench.environments.composite_env.CompositeEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompositeEnv</span></code></a> class to
represent complex setups (e.g., an appication running on a remote VM with a
benchmark running from a local machine).</p>
<p>See below for the set of Environments currently available in this package.</p>
<p>Note that additional ones can also be created by extending the base
<a class="reference internal" href="base_environment/index.html#mlos_bench.environments.base_environment.Environment" title="mlos_bench.environments.base_environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> class and referencing them in the <a class="reference internal" href="../config/index.html#module-mlos_bench.config" title="mlos_bench.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span> <span class="pre">configs</span></code></a> using the <code class="docutils literal notranslate"><span class="pre">class</span></code> key.</p>
</section>
<section id="environment-tunables">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Environment Tunables</a><a class="headerlink" href="#environment-tunables" title="Link to this heading"></a></h2>
<p>Each environment can use
<a class="reference internal" href="../tunables/tunable_groups/index.html#mlos_bench.tunables.tunable_groups.TunableGroups" title="mlos_bench.tunables.tunable_groups.TunableGroups"><code class="xref py py-class docutils literal notranslate"><span class="pre">TunableGroups</span></code></a> to specify the set of
configuration parameters that can be optimized or searched.
At each iteration of the optimization process, the optimizer will generate a set of
values for the <a class="reference internal" href="../tunables/tunable/index.html#mlos_bench.tunables.tunable.Tunable" title="mlos_bench.tunables.tunable.Tunable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tunables</span></code></a> that the
environment can use to configure itself.</p>
<p>At a python level, this happens by passing a
<a class="reference internal" href="../tunables/tunable_groups/index.html#mlos_bench.tunables.tunable_groups.TunableGroups" title="mlos_bench.tunables.tunable_groups.TunableGroups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TunableGroups()</span></code></a> object to the
<code class="docutils literal notranslate"><span class="pre">tunable_groups</span></code> parameter of the <a class="reference internal" href="base_environment/index.html#mlos_bench.environments.base_environment.Environment" title="mlos_bench.environments.base_environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> constructor, but that
is typically handled by the
<a class="reference internal" href="../services/config_persistence/index.html#mlos_bench.services.config_persistence.ConfigPersistenceService.load_environment" title="mlos_bench.services.config_persistence.ConfigPersistenceService.load_environment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_environment()</span></code></a>
method of the
<a class="reference internal" href="../services/config_persistence/index.html#mlos_bench.services.config_persistence.ConfigPersistenceService" title="mlos_bench.services.config_persistence.ConfigPersistenceService"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ConfigPersistenceService()</span></code></a> invoked
by the <code class="docutils literal notranslate"><span class="pre">mlos_bench</span></code> command line tool’s <a class="reference internal" href="../launcher/index.html#mlos_bench.launcher.Launcher" title="mlos_bench.launcher.Launcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlos_bench.launcher.Launcher</span></code></a>
class.</p>
<p>In the typical json user level configs, this is specified in the
<code class="docutils literal notranslate"><span class="pre">include_tunables</span></code> section of the Environment config to include the
<a class="reference internal" href="../tunables/tunable_groups/index.html#mlos_bench.tunables.tunable_groups.TunableGroups" title="mlos_bench.tunables.tunable_groups.TunableGroups"><code class="xref py py-class docutils literal notranslate"><span class="pre">TunableGroups</span></code></a> definitions from other
json files when the <a class="reference internal" href="../launcher/index.html#mlos_bench.launcher.Launcher" title="mlos_bench.launcher.Launcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Launcher</span></code></a> processes the initial
set of config files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tunable_params</span></code> setting in the <code class="docutils literal notranslate"><span class="pre">config</span></code> section of the Environment config
can also be used to limit <em>which</em> of the <code class="docutils literal notranslate"><span class="pre">TunableGroups</span></code> should be used for the
Environment.</p>
<p>Since <a class="reference internal" href="../config/index.html#module-mlos_bench.config" title="mlos_bench.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span> <span class="pre">configs</span></code></a> also support <code class="docutils literal notranslate"><span class="pre">$variable</span></code>
substitution in the values using the <cite>globals</cite> mechanism, this setting can used to
dynamically change the set of active TunableGroups for a given Experiment using only
<cite>globals</cite>, allowing for configs to be more modular and composable.</p>
</section>
<section id="environment-services">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Environment Services</a><a class="headerlink" href="#environment-services" title="Link to this heading"></a></h2>
<p>Environments can also reference <a class="reference internal" href="../services/index.html#module-mlos_bench.services" title="mlos_bench.services"><code class="xref py py-mod docutils literal notranslate"><span class="pre">services</span></code></a> that provide the
necessary support to perform the actions that environment needs for each of its
phases depending upon where its being deployed (e.g., local machine, remote machine,
cloud provider VM, etc.)</p>
<p>Although this can be done in the Environment config directly with the
<code class="docutils literal notranslate"><span class="pre">include_services</span></code> key, it is often more useful to do it in the global or
<a class="reference internal" href="../config/index.html#module-mlos_bench.config" title="mlos_bench.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cli</span> <span class="pre">config</span></code></a> to allow for the same Environment to be
used in different settings (e.g., local machine, SSH accessible machine, Azure VM,
etc.) without having to change the Environment config.</p>
</section>
<section id="variable-propagation">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Variable Propagation</a><a class="headerlink" href="#variable-propagation" title="Link to this heading"></a></h2>
<p>TODO: Document how variable propagation works in the script environments using
required_args, const_args, etc.</p>
<p class="rubric">Examples</p>
<p>While this documentation is generated from the source code and is intended to be a
useful reference on the internal details, most users will be more interested in
generating json configs to be used with the <code class="docutils literal notranslate"><span class="pre">mlos_bench</span></code> command line tool.</p>
<p>For a simple working user oriented example please see the <a class="reference external" href="https://github.com/microsoft/MLOS/blob/main/mlos_bench/mlos_bench/tests/config/environments/local/test_local_env.jsonc">test_local_env_bench.jsonc</a>
file or other examples in the source tree linked below.</p>
<p>For more developer oriented examples please see the <a class="reference external" href="https://github.com/microsoft/MLOS/blob/main/mlos_bench/mlos_bench/tests/">mlos_bench/tests/environments</a>
directory in the source tree.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>See <a class="reference external" href="https://github.com/microsoft/MLOS/tree/main/mlos_bench/mlos_bench/environments/">mlos_bench/environments/README.md</a>
for additional documentation in the source tree.</p></li>
<li><p>See <a class="reference external" href="https://github.com/microsoft/MLOS/tree/main/mlos_bench/mlos_bench/config/environments/">mlos_bench/config/environments/README.md</a>
for additional config examples in the source tree.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../config/index.html#module-mlos_bench.config" title="mlos_bench.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlos_bench.config</span></code></a></dt><dd><p>Overview of the configuration system.</p>
</dd>
<dt><a class="reference internal" href="../services/index.html#module-mlos_bench.services" title="mlos_bench.services"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlos_bench.services</span></code></a></dt><dd><p>Overview of the Services available to the Environments and their configurations.</p>
</dd>
<dt><a class="reference internal" href="../tunables/index.html#module-mlos_bench.tunables" title="mlos_bench.tunables"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlos_bench.tunables</span></code></a></dt><dd><p>Overview of the Tunables available to the Environments and their configurations.</p>
</dd>
</dl>
</div>
</section>
<section id="submodules">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Submodules</a><a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="base_environment/index.html">mlos_bench.environments.base_environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="composite_env/index.html">mlos_bench.environments.composite_env</a></li>
<li class="toctree-l1"><a class="reference internal" href="local/index.html">mlos_bench.environments.local</a></li>
<li class="toctree-l1"><a class="reference internal" href="mock_env/index.html">mlos_bench.environments.mock_env</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote/index.html">mlos_bench.environments.remote</a></li>
<li class="toctree-l1"><a class="reference internal" href="script_env/index.html">mlos_bench.environments.script_env</a></li>
<li class="toctree-l1"><a class="reference internal" href="status/index.html">mlos_bench.environments.status</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../dict_templater/index.html" class="btn btn-neutral float-left" title="mlos_bench.dict_templater" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="base_environment/index.html" class="btn btn-neutral float-right" title="mlos_bench.environments.base_environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Microsoft GSL.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>